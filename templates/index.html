<!DOCTYPE html>
<html>
<head>
  <title>PSX ‚Äì Port Scanner eXtreme</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.socket.io/4.4.1/socket.io.min.js"></script>
</head>
<body class="p-4">
  <div class="container">
    <h1 class="mb-4">üîç PSX ‚Äì Port Scanner eXtreme</h1>

    <form id="scan-form">
      <div class="mb-3">
        <input type="text" id="domain" placeholder="Enter domain (e.g. scanme.nmap.org)" class="form-control" required>
      </div>
      <div class="mb-3 d-flex gap-2">
        <input type="number" id="start_port" placeholder="Start Port" class="form-control" required>
        <input type="number" id="end_port" placeholder="End Port" class="form-control" required>
      </div>
      <button type="submit" class="btn btn-primary">Start Scan</button>
    </form>

    <h4 class="mt-4">üìã Live Log</h4>
    <pre id="log-box" style="background:#f8f9fa; padding:10px; height:300px; overflow:auto;"></pre>

    <h4 class="mt-3">‚ö†Ô∏è Threat Level: <span id="threat-level" class="badge bg-secondary">Unknown</span></h4>
  </div>

  <script>
    const socket = io();
    const logBox = document.getElementById("log-box");
    const threatBadge = document.getElementById("threat-level");

    document.getElementById("scan-form").addEventListener("submit", function(e) {
      e.preventDefault();
      logBox.textContent = "";
      threatBadge.textContent = "Scanning...";
      threatBadge.className = "badge bg-secondary";

      const domain = document.getElementById("domain").value;
      const start_port = document.getElementById("start_port").value;
      const end_port = document.getElementById("end_port").value;

      socket.emit("start_scan", { domain, start_port, end_port });
    });

    socket.on("log", function(msg) {
      logBox.textContent += msg + "\n";
      logBox.scrollTop = logBox.scrollHeight;
    });

    socket.on("done", function(data) {
      const level = data.threat_level;
      let color = "secondary";

      if (level === "Low") color = "success";
      else if (level === "Medium") color = "warning";
      else if (level === "High") color = "danger";

      threatBadge.textContent = level;
      threatBadge.className = `badge bg-${color}`;
    });
  </script>
</body>
</html>
